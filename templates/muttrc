# Setup mbsync and msmtp
macro index G "!mbsync -a^M" "Update through mbsync"
set sendmail="/usr/bin/msmtp"

# Cache Directories
set header_cache = "~/.mutt/cache/headers"
set message_cachedir = "~/.mutt/cache/bodies"
set certificate_file = "~/.mutt/certificates"

# Sorting
set sort_aux=last-date-received
set sort=threads
set sort_re
set sort_alias=alias     # sort aliases in alpha order by alias name
set auto_tag = yes
hdr_order Date: From: To: Cc: Reply-To: Subject:

# Other
set move = no
set imap_keepalive = 112
set markers
set smart_wrap
set pager_context=3
set status_on_top
set timeout = 15
push <show-version>
set quit
auto_view text/html

# Editor
# Ensure columns are less than 78 characters in length
set editor = "vi -c 'set spell spelllang=en' -c 'set textwidth=80' -c 'set wrapmargin=2'"
set edit_headers

# GPG Settings
source ~/.gpg.rc
set pgp_autosign
set pgp_replysign
set pgp_use_gpg_agent = yes
set pgp_sign_as = @@SIGNKEY@@
set pgp_timeout = 3600
set crypt_autosign = yes
set crypt_replyencrypt = yes
set crypt_replysignencrypted = yes

bind pager k previous-line
bind pager j next-line
bind index <Return> display-message

# Notify
set new_mail_command="notify-send 'New Email' '%n new messages, %u unread.' &"

# Keybindings
bind editor <space> noop
bind index,pager d delete-message

# Colors
#     Area       FG           BG      Status
color normal     red          default
color attachment brightyellow default
color index      brightred    default "~N"
color status	 yellow       default
color tree       magenta      default

# Useful macros
macro index,pager <f1> "<sync-mailbox><enter-command>source ~/.mutt/main<enter><change-folder>!<enter>"
macro index,pager <f2> "<sync-mailbox><enter-command>source ~/.mutt/gmail<enter><change-folder>!<enter>"

# Default to the main mailbox
source ~/.mutt/main
